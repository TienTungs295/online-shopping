<template>
    <div>
        <!-- START SECTION BANNER -->
        <div class="banner_section slide_custom shop_banner_slider staggered-animation-wrap">
            <div id="carouselExampleControls" class="carousel slide carousel-fade light_arrow" data-ride="carousel">
                <div class="carousel-inner">
                    <div class="carousel-item background_bg active" data-img-src="assets/images/banner16.jpg">
                        <div class="banner_slide_content banner_content_inner">
                            <div class="container">
                                <div class="row">
                                    <div class="col-lg-7 col-10">
                                        <div class="banner_content overflow-hidden">
                                            <h2 class="staggered-animation" data-animation="slideInLeft"
                                                data-animation-delay="0.5s">LED 75 INCH F58</h2>
                                            <h5 class="mb-3 mb-sm-4 staggered-animation font-weight-light"
                                                data-animation="slideInLeft" data-animation-delay="1s">Get up to <span
                                                class="text_default">50%</span> off Today Only!</h5>
                                            <a class="btn btn-fill-out rounded-0 staggered-animation text-uppercase"
                                               href="shop-left-sidebar.html" data-animation="slideInLeft"
                                               data-animation-delay="1.5s">Shop Now</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="carousel-item background_bg" data-img-src="assets/images/banner17.jpg">
                        <div class="banner_slide_content banner_content_inner">
                            <div class="container">
                                <div class="row">
                                    <div class="col-lg-8 col-10">
                                        <div class="banner_content overflow-hidden">
                                            <h2 class="staggered-animation" data-animation="slideInLeft"
                                                data-animation-delay="0.5s">Smart Phones</h2>
                                            <h5 class="mb-3 mb-sm-4 staggered-animation font-weight-light"
                                                data-animation="slideInLeft" data-animation-delay="1s"><span
                                                class="text_default">50%</span> off in all products</h5>
                                            <a class="btn btn-fill-out rounded-0 staggered-animation text-uppercase"
                                               href="shop-left-sidebar.html" data-animation="slideInLeft"
                                               data-animation-delay="1.5s">Shop Now</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="carousel-item background_bg" data-img-src="assets/images/banner18.jpg">
                        <div class="banner_slide_content banner_content_inner">
                            <div class="container">
                                <div class="row">
                                    <div class="col-lg-8 col-10">
                                        <div class="banner_content overflow-hidden">
                                            <h2 class="staggered-animation" data-animation="slideInLeft"
                                                data-animation-delay="0.5s">Beat Headphone</h2>
                                            <h5 class="mb-3 mb-sm-4 staggered-animation font-weight-light"
                                                data-animation="slideInLeft" data-animation-delay="1s">Taking your
                                                Viewing Experience to Next Level</h5>
                                            <a class="btn btn-fill-out rounded-0 staggered-animation text-uppercase"
                                               href="shop-left-sidebar.html" data-animation="slideInLeft"
                                               data-animation-delay="1.5s">Shop Now</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev"><i
                    class="ion-chevron-left"></i></a>
                <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next"><i
                    class="ion-chevron-right"></i></a>
            </div>
        </div>
        <!-- END SECTION BANNER -->

        <!-- END MAIN CONTENT -->
        <div class="main_content">

            <!-- START SECTION CATEGORIES -->
            <div class="section pt-0 small_pb ">
                <div class="container">
                    <div class="row">
                        <div class="col-12">
                            <div class="cat_overlap radius_all_5">
                                <div class="row align-items-center">
                                    <div class="col-lg-3 col-md-4">
                                        <div class="text-center text-md-left">
                                            <h4>Top Categories</h4>
                                            <p class="mb-2">There are many variations of passages of Lorem</p>
                                            <a href="#" class="btn btn-line-fill btn-sm">View All</a>
                                        </div>
                                    </div>
                                    <div class="col-lg-9 col-md-8">
                                        <div
                                            class="cat_slider mt-4 mt-md-0 carousel_slider owl-carousel owl-theme nav_style5"
                                            data-loop="true" data-dots="false" data-nav="true" data-margin="30"
                                            data-responsive='{"0":{"items": "1"}, "380":{"items": "2"}, "991":{"items": "3"}, "1199":{"items": "4"}}'>
                                            <div class="item">
                                                <div class="categories_box">
                                                    <a href="#">
                                                        <i class="flaticon-bed"></i>
                                                        <span>Bedroom</span>
                                                    </a>
                                                </div>
                                            </div>
                                            <div class="item">
                                                <div class="categories_box">
                                                    <a href="#">
                                                        <i class="flaticon-table"></i>
                                                        <span>Dining Table</span>
                                                    </a>
                                                </div>
                                            </div>
                                            <div class="item">
                                                <div class="categories_box">
                                                    <a href="#">
                                                        <i class="flaticon-sofa"></i>
                                                        <span>Sofa</span>
                                                    </a>
                                                </div>
                                            </div>
                                            <div class="item">
                                                <div class="categories_box">
                                                    <a href="#">
                                                        <i class="flaticon-armchair"></i>
                                                        <span>Armchair</span>
                                                    </a>
                                                </div>
                                            </div>
                                            <div class="item">
                                                <div class="categories_box">
                                                    <a href="#">
                                                        <i class="flaticon-chair"></i>
                                                        <span>chair</span>
                                                    </a>
                                                </div>
                                            </div>
                                            <div class="item">
                                                <div class="categories_box">
                                                    <a href="#">
                                                        <i class="flaticon-desk-lamp"></i>
                                                        <span>desk lamp</span>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- END SECTION CATEGORIES -->

            <!-- START SECTION SHOP -->
            <div class="section pdt-30-i small_pb">
                <div class="container">
                    <div class="row">
                        <div class="col-12">
                            <div class="heading_tab_header">
                                <div class="heading_s2">
                                    <h2>Bộ sưu tập</h2>
                                </div>
                                <div class="tab-style2">
                                    <button class="navbar-toggler" type="button" data-toggle="collapse"
                                            data-target="#tabmenubar" aria-expanded="false">
                                        <span class="ion-android-menu"></span>
                                    </button>
                                    <ul class="nav nav-tabs justify-content-center justify-content-md-end"
                                        id="tabmenubar">
                                        <li class="nav-item"
                                            v-for="(item, index) in collections"
                                            :key="index"
                                            @click="changeCollection(item.id, index)">
                                            <a class="nav-link cursor-pointer"
                                               :class="{ active: index == currentIndex }">{{ item.name }}</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12">
                            <div class="tab-pane fade show active" v-if="!isLoading">
                                <div class="product_slider carousel_slider owl-carousel owl-theme dot_style1" v-carousel
                                     data-loop="false" data-margin="20"
                                     data-responsive='{"0":{"items": "1"}, "481":{"items": "2"}, "768":{"items": "3"}, "991":{"items": "4"}}'>
                                    <div class="item" v-for="item in productCollections">
                                        <product-item-component v-bind:item="item"></product-item-component>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- END SECTION SHOP -->

            <!-- START SECTION BANNER -->
            <div class="section pb_20 small_pt">
                <div class="container">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="single_banner">
                                <img src="assets/images/shop_banner_img1.jpg" alt="shop_banner_img1">
                                <div class="single_banner_info">
                                    <h5 class="single_bn_title1">Super Sale</h5>
                                    <h3 class="single_bn_title">New Collection</h3>
                                    <a href="shop-left-sidebar.html" class="single_bn_link">Shop Now</a>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="single_banner">
                                <img src="assets/images/shop_banner_img2.jpg" alt="shop_banner_img2">
                                <div class="single_banner_info">
                                    <h3 class="single_bn_title">New Season</h3>
                                    <h4 class="single_bn_title1">Sale 40% Off</h4>
                                    <a href="shop-left-sidebar.html" class="single_bn_link">Shop Now</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- END SECTION BANNER -->

            <!-- START TRENDING -->
            <div class="section small_pb small_pt">
                <div class="container">
                    <div class="row">
                        <div class="col-12">
                            <div class="heading_tab_header">
                                <div class="heading_s2">
                                    <h2>Sản phẩm thịnh hành</h2>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12">
                            <div class="tab-pane fade show active" v-if="!isLoadingTrending">
                                <div class="product_slider carousel_slider owl-carousel owl-theme dot_style1" v-carousel
                                     data-loop="false" data-margin="20"
                                     data-responsive='{"0":{"items": "1"}, "481":{"items": "2"}, "768":{"items": "3"}, "991":{"items": "4"}}'>
                                    <div class="item" v-for="item in trendingProducts">
                                        <product-item-component v-bind:item="item"></product-item-component>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- END TRENDING -->

            <!-- START SECTION BANNER -->
            <div class="section pb_20 small_pt">
                <div class="container-fluid px-2">
                    <div class="row no-gutters">
                        <div class="col-md-4">
                            <div class="sale_banner">
                                <a class="hover_effect1" href="#">
                                    <img src="assets/images/shop_banner_img3.jpg" alt="shop_banner_img3">
                                </a>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="sale_banner">
                                <a class="hover_effect1" href="#">
                                    <img src="assets/images/shop_banner_img4.jpg" alt="shop_banner_img4">
                                </a>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="sale_banner">
                                <a class="hover_effect1" href="#">
                                    <img src="assets/images/shop_banner_img5.jpg" alt="shop_banner_img5">
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- END SECTION BANNER -->


            <!-- START SECTION SHOP -->
            <div class="section small_pt pdb-50-i">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-4">
                            <div class="row">
                                <div class="col-12">
                                    <div class="heading_tab_header">
                                        <div class="heading_s2">
                                            <h2>Sản phẩm đặc trưng</h2>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-12">
                                    <div v-if="!isLoadingFeatured" v-carousel
                                         class="product_slider carousel_slider product_list owl-carousel owl-theme nav_style5"
                                         data-nav="true"
                                         data-dots="false" data-loop="false" data-margin="20"
                                         data-responsive='{"0":{"items": "1"}, "380":{"items": "1"}, "640":{"items": "2"}, "991":{"items": "1"}}'>
                                        <div class="item" v-for="entry in featuredProductMap">
                                            <div v-for="item in entry">
                                                <div class="product_wrap">
                                                    <div class="product_img style-2">
                                                        <a href="shop-product-detail.html">
                                                            <img :src="'/uploads/images/'+item.image" :alt="item.image">
                                                        </a>
                                                    </div>
                                                    <div class="product_info">
                                                        <h6 class="product_title"><a
                                                            href="shop-product-detail.html">{{ item.name }}</a></h6>
                                                        <div class="product_price">
                                                            <div v-if="item.on_sale">
                                                                <span class="price">{{ item.sale_price }}</span>
                                                                <del>{{ item.price }}</del>
                                                                <div class="on_sale d-block"
                                                                     v-if="item.sale_off != null">
                                                                    <span>{{ item.sale_off }}% Off</span>
                                                                </div>
                                                            </div>
                                                            <div v-else>
                                                                <span class="price">{{ item.price }}</span>
                                                            </div>
                                                        </div>
                                                        <div class="rating_wrap">
                                                            <div class="rating">
                                                                <div class="product_rate" style="width:80%"></div>
                                                            </div>
                                                            <span class="rating_num">(21)</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="row">
                                <div class="col-12">
                                    <div class="heading_tab_header">
                                        <div class="heading_s2">
                                            <h2>Sản phẩm xếp hạng cao nhất</h2>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-12">
                                    <div v-if="!isLoadingFeatured" v-carousel
                                         class="product_slider carousel_slider product_list owl-carousel owl-theme nav_style5"
                                         data-nav="true"
                                         data-dots="false" data-loop="false" data-margin="20"
                                         data-responsive='{"0":{"items": "1"}, "380":{"items": "1"}, "640":{"items": "2"}, "991":{"items": "1"}}'>
                                        <div class="item" v-for="entry in featuredProductMap">
                                            <div v-for="item in entry">
                                                <div class="product_wrap">
                                                    <div class="product_img style-2">
                                                        <a href="shop-product-detail.html">
                                                            <img :src="'/uploads/images/'+item.image" :alt="item.image">
                                                        </a>
                                                    </div>
                                                    <div class="product_info">
                                                        <h6 class="product_title"><a
                                                            href="shop-product-detail.html">{{ item.name }}</a></h6>
                                                        <div class="product_price">
                                                            <div v-if="item.on_sale">
                                                                <span class="price">{{ item.sale_price }}</span>
                                                                <del>{{ item.price }}</del>
                                                                <div class="on_sale d-block"
                                                                     v-if="item.sale_off != null">
                                                                    <span>{{ item.sale_off }}% Off</span>
                                                                </div>
                                                            </div>
                                                            <div v-else>
                                                                <span class="price">{{ item.price }}</span>
                                                            </div>
                                                        </div>
                                                        <div class="rating_wrap">
                                                            <div class="rating">
                                                                <div class="product_rate" style="width:80%"></div>
                                                            </div>
                                                            <span class="rating_num">(21)</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="row">
                                <div class="col-12">
                                    <div class="heading_tab_header">
                                        <div class="heading_s2">
                                            <h2>Sản phẩm đang giảm giá</h2>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-12">
                                    <div v-if="!isLoadingFeatured" v-carousel
                                         class="product_slider carousel_slider product_list owl-carousel owl-theme nav_style5"
                                         data-nav="true"
                                         data-dots="false" data-loop="false" data-margin="20"
                                         data-responsive='{"0":{"items": "1"}, "380":{"items": "1"}, "640":{"items": "2"}, "991":{"items": "1"}}'>
                                        <div class="item" v-for="entry in featuredProductMap">
                                            <div v-for="item in entry">
                                                <div class="product_wrap">
                                                    <div class="product_img style-2">
                                                        <a href="shop-product-detail.html">
                                                            <img :src="'/uploads/images/'+item.image" :alt="item.image">
                                                        </a>
                                                    </div>
                                                    <div class="product_info">
                                                        <h6 class="product_title"><a
                                                            href="shop-product-detail.html">{{ item.name }}</a></h6>
                                                        <div class="product_price">
                                                            <div v-if="item.on_sale">
                                                                <span class="price">{{ item.sale_price }}</span>
                                                                <del>{{ item.price }}</del>
                                                                <div class="on_sale d-block"
                                                                     v-if="item.sale_off != null">
                                                                    <span>{{ item.sale_off }}% Off</span>
                                                                </div>
                                                            </div>
                                                            <div v-else>
                                                                <span class="price">{{ item.price }}</span>
                                                            </div>
                                                        </div>
                                                        <div class="rating_wrap">
                                                            <div class="rating">
                                                                <div class="product_rate" style="width:80%"></div>
                                                            </div>
                                                            <span class="rating_num">(21)</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
            <!-- END SECTION SHOP -->

            <div>
                <div class="container">
                    <div class="row">
                        <div class="col-12">
                            <div style="border-bottom: 1px solid #ddd;"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- START SECTION BLOG -->
            <div class="section pdb-50-i pdt-50-i">
                <div class="container">
                    <div class="row justify-content-center">
                        <div class="col-lg-6 col-md-8">
                            <div class="heading_s1 text-center">
                                <h2>Tin tức & Sự kiện</h2>
                            </div>
                            <p class="leads text-center">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do
                                eiusmod tempor incididunt ut labore.</p>
                        </div>
                    </div>
                    <div class="row justify-content-center">
                        <div class="col-lg-4 col-md-6" v-for="item in blogs">
                            <blog-item-component v-bind:item="item"></blog-item-component>
                        </div>
                    </div>
                </div>
            </div>
            <!-- END SECTION BLOG -->


            <!-- START SECTION TESTIMONIAL -->
            <div class="section bg_redon pdt-50-i pdb-50-i">
                <div class="container">
                    <div class="row justify-content-center">
                        <div class="col-md-6">
                            <div class="heading_s1 text-center">
                                <h2>Ý kiến khách hàng!</h2>
                            </div>
                        </div>
                    </div>
                    <div class="row justify-content-center">
                        <div class="col-lg-9">
                            <div
                                class="testimonial_wrap testimonial_style1 carousel_slider owl-carousel owl-theme nav_style2"
                                data-nav="true" data-dots="false" data-center="true" data-loop="true"
                                data-autoplay="true" data-items='1'>
                                <div class="testimonial_box">
                                    <div class="testimonial_desc">
                                        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. A aliquam amet
                                            animi blanditiis consequatur debitis dicta distinctio, enim error eum iste
                                            libero modi nam natus perferendis possimus quasi sint sit tempora
                                            voluptatem.</p>
                                    </div>
                                    <div class="author_wrap">
                                        <div class="author_img">
                                            <img src="assets/images/user_img1.jpg" alt="user_img1"/>
                                        </div>
                                        <div class="author_name">
                                            <h6>Lissa Castro</h6>
                                            <span>Designer</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="testimonial_box">
                                    <div class="testimonial_desc">
                                        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. A aliquam amet
                                            animi blanditiis consequatur debitis dicta distinctio, enim error eum iste
                                            libero modi nam natus perferendis possimus quasi sint sit tempora
                                            voluptatem.</p>
                                    </div>
                                    <div class="author_wrap">
                                        <div class="author_img">
                                            <img src="assets/images/user_img2.jpg" alt="user_img2"/>
                                        </div>
                                        <div class="author_name">
                                            <h6>Alden Smith</h6>
                                            <span>Designer</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="testimonial_box">
                                    <div class="testimonial_desc">
                                        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. A aliquam amet
                                            animi blanditiis consequatur debitis dicta distinctio, enim error eum iste
                                            libero modi nam natus perferendis possimus quasi sint sit tempora
                                            voluptatem.</p>
                                    </div>
                                    <div class="author_wrap">
                                        <div class="author_img">
                                            <img src="assets/images/user_img3.jpg" alt="user_img3"/>
                                        </div>
                                        <div class="author_name">
                                            <h6>Daisy Lana</h6>
                                            <span>Designer</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="testimonial_box">
                                    <div class="testimonial_desc">
                                        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. A aliquam amet
                                            animi blanditiis consequatur debitis dicta distinctio, enim error eum iste
                                            libero modi nam natus perferendis possimus quasi sint sit tempora
                                            voluptatem.</p>
                                    </div>
                                    <div class="author_wrap">
                                        <div class="author_img">
                                            <img src="assets/images/user_img4.jpg" alt="user_img4"/>
                                        </div>
                                        <div class="author_name">
                                            <h6>John Becker</h6>
                                            <span>Designer</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- END SECTION TESTIMONIAL -->

            <!-- START SECTION SHOP INFO -->
            <div class="pdt-50 pdb-50">
                <div class="container">
                    <div class="row">
                        <div class="col-12">
                            <div class="shopping_info border-0">
                                <div class="row justify-content-center">
                                    <div class="col-md-4 icon-box-inner">
                                        <div class="icon_box icon_box_style2">
                                            <div class="icon bg_gray">
                                                <i class="flaticon-shipped"></i>
                                            </div>
                                            <div class="icon_box_content">
                                                <h5>Free Delivery</h5>
                                                <p>Phasellus blandit massa enim elit of passage varius nunc.</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4 icon-box-inner">
                                        <div class="icon_box icon_box_style2 pdl-5-i">
                                            <div class="icon bg_gray">
                                                <i class="flaticon-money-back"></i>
                                            </div>
                                            <div class="icon_box_content">
                                                <h5>30 Day Returns Guarantee</h5>
                                                <p>Phasellus blandit massa enim elit of passage varius nunc.</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4 icon-box-inner">
                                        <div class="icon_box icon_box_style2 pdl-5-i">
                                            <div class="icon bg_gray">
                                                <i class="flaticon-support"></i>
                                            </div>
                                            <div class="icon_box_content">
                                                <h5>27/4 Online Support</h5>
                                                <p>Phasellus blandit massa enim elit of passage varius nunc.</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- END SECTION SHOP INFO -->

            <!-- START SECTION SUBSCRIBE NEWSLETTER -->
            <div class="section bg_default pdt-50-i pdb-50-i">
                <div class="container">
                    <div class="row align-items-center">
                        <div class="col-md-6">
                            <div class="newsletter_text text_white">
                                <h3>Join Our Newsletter Now</h3>
                                <p> Register now to get updates on promotions. </p>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="newsletter_form2">
                                <form>
                                    <input type="text" required="" class="form-control rounded-0"
                                           placeholder="Enter Email Address">
                                    <button type="submit" class="btn btn-dark rounded-0 bg-dark" name="submit"
                                            value="Submit">Subscribe
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- START SECTION SUBSCRIBE NEWSLETTER -->

        </div>
        <!-- END MAIN CONTENT -->
    </div>
</template>

<script>
import ProductService from "../services/ProductService";
import CategoryService from "../services/CategoryService";
import CollectionService from "../services/CollectionService";
import BlogService from "../services/BlogService";
import CartService from "../services/CartService";


export default {
    name: "Home",
    data() {
        return {
            categories: [],
            collections: [],
            productCollections: [],
            trendingProducts: [],
            featuredProducts: [],
            featuredProductMap: {},
            blogs: [],
            currentIndex: 0,
            isLoading: true,
            isLoadingTrending: true,
            isLoadingFeatured: true,
            isLoadingBlog: true
        };
    },
    methods: {
        changeCollection(collection_id, index) {
            this.currentIndex = index;
            this.isLoading = true;
            ProductService.findByCollection(collection_id).then(response => {
                let data = response.data || [];
                this.productCollections = data;
                this.isLoading = false;
            }).catch(e => {
                this.isLoading = false;
            });
        }
    },
    mounted() {
        CategoryService.findAll().then(response => {
            let data = response || [];
            this.categories = data;
        }).catch(e => {
        });

        CollectionService.findAll().then(response => {
            let data = response || [];
            this.collections = data;
        }).catch(e => {
        });
        this.changeCollection(null, 0);

        ProductService.findTrending().then(response => {
            let data = response.data || [];
            this.trendingProducts = data;
            this.isLoadingTrending = false;
        }).catch(e => {
            this.isLoadingTrending = false;
        });

        ProductService.findFeatured().then(response => {
            let data = response.data || [];
            this.featuredProducts = data;
            let groupProducts = [];
            let key = 0;
            for (let i = 0; i < this.featuredProducts.length; i++) {
                let number = i + 1;
                let item = this.featuredProducts[i];
                groupProducts.push(item);
                if ((number != 1 && number % 3 == 0) || (number == this.featuredProducts.length)) {
                    this.featuredProductMap[key] = groupProducts;
                    key++;
                    groupProducts = [];
                }
            }
            this.isLoadingFeatured = false;
        }).catch(e => {
            this.isLoadingFeatured = false;
        });


        BlogService.findAll().then(response => {
            let data = response.data || [];
            this.blogs = data;
            this.isLoadingBlog = false;
        }).catch(e => {
            this.isLoadingBlog = false;
        });
        CartService.findAll(true).then(response => {
            // serviceBus.$emit('refreshWithListNum');
        }).catch(e => {
        });
    }
}
</script>
